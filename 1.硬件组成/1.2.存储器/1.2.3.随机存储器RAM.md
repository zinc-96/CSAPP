# 1.2.3.随机存储器RAM

## RAM

**随机存储器（Random Access Memory，RAM）** 是一种适用于任意读写顺序的存储器类型。RAM允许任意位置数据以几乎相同的时间读写。

RAM主要有两类：SRAM（static）和DRAM（dynamic）。

## SRAM

用6个MOS管可以组成锁存1比特的结构，称为六管结构。用六管结构可以组成静态存储器SRAM。**静态**指**输出和状态完全受电源和输入信号**控制，当设备保持供电时，SRAM中存储的数据可以保持不变；掉电时，其存储的数据会丢失。

### MOS管

​![image](assets/image-20240408201314-n09byqv.png)​

MOS管的特点：

* 开关特性，G是开关控制，当G为高电平时S和D导通；当G为低电平时S和D断开
* 动态特性，无法保存状态

单个MOS管无法保存状态，所以我们想到了用两对MOS管组成一个双稳态触发器。

### 双稳态触发器

​![image](assets/image-20240408203409-x13z46u.png)​

对于左面的两个MOS管T1和T2，它们组成了一个反相器，而右面的两个MOS管T3和T4也组成了一个反相器，这两个反相器相互连接，形成互锁，就变成了一个双稳态触发器。

双稳态触发器有以下特点：

* 具有记忆功能
* 能储存一位二进制数
* 有两个稳定的工作状态
* 在外加信号触发下可进行稳态切换

我们还需要想办法控制这个双稳态触发器进行稳态切换，于是想到了使用两个MOS管和两种控制线来控制两种状态的切换。

### 六管结构

​![image](assets/image-20240408203857-ujghomi.png)​

我们在双稳态触发器的基础上增加了两个MOS管T5和T6、字选择线WL和位选择线BL。

字选择线WL用来控制六管结构处于保持状态还是读写状态，当WL=0时保持，当WL=1时读写。

位选择线BL用来控制六管结构读取和写入的数据。两个位线是一组。

> 扩展：
>
> 在下图中，PD对应上面的T1、T3，PU对应T2、T4，PG对应T5、T6。SRAM单元由2个PMOS（PU），4个NMOS（PD、PG）组成，这里PU和PD形成一个反相器，两个反相器形成互锁结构，通过这样的特性来实现数据的保存。PU（pull up）也称为load transistor，他的功能是实现节点的高电位，也就是1的状态；PD（pull down）也称为drive transistor，他的功能是实现节点的低电位，也就是0的状态。这样一个bit中的两个节点（SNL和SNR）高低电位互换，就能实现0和1两种状态的存储，PG（pass gate）也称为access transistor，他的功能是实现位线的接入，以实现读写功能。
>
> ​![image](assets/image-20240415213136-tvgb3xj.png)​

#### 写入

在写周期之前，需要把要写入的状态加载到位线。如需要写入数据0，则设置BL=0，¬BL=1。随后将WL置为高电平，T5和T6导通，位线的状态被写入基本存储单元中。

​![image](assets/image-20240408211054-iipedf3.png)​

​![image](assets/image-20240408211104-qkoufxm.png)​

#### 保持

若字线WL为低电平，则T5和T6两个MOS管处于截止状态，将基本存储单元与位线隔离。由T1-T4组成的双稳态触发器继续保持其状态。

​![image](assets/image-20240408211125-2shqnes.png)​

#### 读取

假设该基本存储单元中存储的数据为1。在读周期开始之前，通过预充电电路，将两根位线的电平充电到高电平。随后将WL置为高电平，使得T5和T6导通。因为我们假设存储的数据为1，故T3导通，右侧的位线之前预充的高电平通过T3和T6连接到地，感受到低电平，说明读取的数据为1。

​![image](assets/image-20240408212220-0gmjgua.png)​

假设该基本存储单元中存储的数据为0。在读周期开始之前，通过预充电电路，将两根位线的电平充电到高电平。随后将WL置为高电平，使得T5和T6导通。因为我们假设存储的数据为0，故T1导通，左侧的位线之前预充的高电平通过T1和T5连接到地，感受到低电平，说明读取的数据为0。

​![image](assets/image-20240408212422-hdd9gel.png)​

#### 等效图

​![image](assets/image-20240415214348-p1ejhjo.png)​

### SRAM阵列结构

例如下面的是一个4行8位的SRAM，每个六管结构就是一个**单元**。

​![image](assets/image-20240408204626-isz45vc.png)​

每行的8个单元通过字线连接，每列的4个单元通过位线连接，这样字线和位线相当于组成了一个二维坐标，可以具体控制某个单元的状态。简单来说，WL用于控制存储单元和BL的连通，BL用于读写存储单元。

​![image](assets/image-20240408204739-ym2uexq.png)​

## DRAM

用1个MOS管和电容可以组成锁存1位比特的结构，称为单管结构。用单管结构可以组成动态存储器DRAM。**动态**指**输出和状态与电容有关**，需要对电容充电（刷新）。

电容是非持续电荷器件，随读取次数，电荷有破坏性，需要电容定时刷新。

DRAM的优点是元件少、功耗小、集成度高，缺点是速度慢、需定时刷新。

### 单管结构

单管结构本质上是靠电容存储信息，由1个MOS管控制。

​![image](assets/image-20240408212812-1ajak11.png)​

#### 写入

写入1时字线WL置高电平，位线BL置高电平，经过T对Cs充电。

​![image](assets/image-20240408214645-2nhxivf.png)​

写入0时字线WL置高电平，位线BL置低电平，经过T对Cs放电。

​![image](assets/image-20240408214804-srsfzm1.png)​

#### 读取

读取时WL置高电平，让C<sub>s</sub>影响BL。

​![image](assets/image-20240408214844-443pul6.png)​

## 存储器芯片

存储器芯片由**存储体**、**I/O电路**、**地址译码**和**控制电路**等部分组成。

存储体（存储矩阵）是存储单元的集合。地址译码器用来将地址转换为译码输出线上的高电平，以便驱动相应的读写电路。

​![image](assets/image-20240408215142-23l373u.png)​

例如，下面是一个4M X 4位DRAM芯片

​![image](assets/image-20240408215302-ogu3kyh.png)​

### 存储器芯片的扩展

* 位扩展：用若干片位数较少的存储器芯片构成给定字长的内存条时，需要进行位扩展。
* 字扩展：字扩展是容量的扩充，位数不变。
* 字、位同时扩展：当芯片在容量和位数都不满足存储器要求的情况下，需要对字和位同时扩展。

​![image](assets/image-20240408215856-rb2kms7.png)​

例如：

​![image](assets/image-20240408215954-i660d2q.png)​

## 多模块存储器

多模块存储器可以用来提高访存速度，包含多个小存储体，每个都有MAR（主存地址寄存器）、MDR（主存数据寄存器）和读写电路。可组成一个存储模块，可同时对多个模块进行访问。

多模块存储器可以有不同的编制方式：连续编址、交叉编址。

​![image](assets/image-20240408220435-2tax4dr.png)​

​![image](assets/image-20240408220442-8u7irsv.png)​

‍
